"use strict";var e=require("react/jsx-runtime"),t=require("@visx/group"),l=require("@visx/shape"),a=require("clsx"),i=require("react"),o=require("@visx/event"),s=require("@visx/tooltip"),n=require("@visx/legend"),r=require("@visx/scale"),d=require("@visx/responsive");const c={backgroundColor:"#FFFFFF",labelBackgroundColor:"#FFFFFF",colors:["#98C8DF","#006DAB","#A6DC80","#1F9828","#FF8C8F"],gridStyles:{stroke:"#787C82",strokeWidth:1},tickLength:0,gridColor:"",gridColorDark:""},h=i.createContext(c);var p={"legend--horizontal":"legend-module__legend--horizontal__IUN13","legend--vertical":"legend-module__legend--vertical__Scfzo","legend-item":"legend-module__legend-item__feemn","legend-item-swatch":"legend-module__legend-item-swatch__nRyXf","legend-item-label":"legend-module__legend-item-label__ksx6I","legend-item-value":"legend-module__legend-item-value__d9x1j"};const u={horizontal:"row",vertical:"column"},g=({items:t,className:l,orientation:i="horizontal"})=>{const o=r.scaleOrdinal({domain:t.map((e=>e.label)),range:t.map((e=>e.color))});return e.jsx("div",{className:a(p.legend,p[`legend--${i}`],l),role:"list",children:e.jsx(n.LegendOrdinal,{scale:o,direction:u[i],shape:"rect",shapeWidth:16,shapeHeight:16,className:p["legend-items"],children:l=>e.jsx("div",{className:p[`legend--${i}`],children:l.map((l=>e.jsxs("div",{className:p["legend-item"],children:[e.jsx("svg",{width:16,height:16,children:e.jsx("rect",{width:16,height:16,fill:l.value,className:p["legend-item-swatch"]})}),e.jsxs("span",{className:p["legend-item-label"],children:[l.text,t.find((e=>e.label===l.text))?.value&&e.jsx("span",{className:p["legend-item-value"],children:t.find((e=>e.label===l.text))?.value})]})]},l.text)))})})})};var m="base-tooltip-module__tooltip__OfX6n";const v=({data:t})=>e.jsxs(e.Fragment,{children:[t?.label,": ",t?.valueDisplay||t?.value]}),x=({data:t,top:l,left:a,component:i=v,children:o,className:s})=>e.jsx("div",{className:m,style:{top:l,left:a},role:"tooltip",children:o||t&&e.jsx(i,{data:t,className:s})});var _={"pie-chart":"pie-chart-module__pie-chart__R12Vh"};const f=({data:n,withTooltips:r=!1,className:d,showLegend:p,legendOrientation:u,size:m,thickness:v=1,padding:f=20,gapScale:j=0,cornerScale:b=0})=>{const N=i.useContext(h),{onMouseMove:F,onMouseLeave:w,tooltipOpen:C,tooltipData:M,tooltipLeft:k,tooltipTop:T}=(({withTooltips:e})=>{const{tooltipOpen:t,tooltipLeft:l,tooltipTop:a,tooltipData:n,hideTooltip:r,showTooltip:d}=s.useTooltip();return{onMouseMove:i.useCallback(((t,l)=>{if(!e)return;const a=o.localPoint(t);a&&d({tooltipData:l,tooltipLeft:a.x,tooltipTop:a.y-10})}),[e,d]),onMouseLeave:i.useCallback((()=>{e&&r()}),[e,r]),tooltipOpen:t,tooltipData:n||null,tooltipLeft:l,tooltipTop:a}})({withTooltips:r}),{isValid:q,message:L}=(e=>{if(!e.length)return{isValid:!1,message:"No data available"};if(e.some((e=>e.percentage<0||e.value<0)))return{isValid:!1,message:"Invalid data: Negative values are not allowed"};const t=e.reduce(((e,t)=>e+t.percentage),0);return Math.abs(t-100)>.01?{isValid:!1,message:"Invalid percentage total: Must equal 100"}:{isValid:!0,message:""}})(n);if(!q)return e.jsx("div",{className:a("pie-chart",_["pie-chart"],d),children:e.jsx("div",{className:_["error-message"],children:L})});const y=m,z=m,D=Math.min(y,z)/2,R=y/2,S=z/2,A=j*(2*Math.PI/n.length),O=D-f,V=O*(1-v),P=(O-V)/2,$=b?Math.min(b*O,P):0,B=n.map(((e,t)=>({...e,index:t}))),I={value:e=>e.value,fill:e=>e?.color||N.colors[e.index]},W=n.map(((e,t)=>({label:e.label,value:e.value.toString(),color:N.colors[t%N.colors.length]})));return e.jsxs("div",{className:a("pie-chart",_["pie-chart"],d),children:[e.jsx("svg",{viewBox:`0 0 ${m} ${m}`,preserveAspectRatio:"xMidYMid meet",children:e.jsx(t.Group,{top:S,left:R,children:e.jsx(l.Pie,{data:B,pieValue:I.value,outerRadius:O,innerRadius:V,padAngle:A,cornerRadius:$,children:t=>t.arcs.map(((l,a)=>{const[i,o]=t.path.centroid(l),s=l.endAngle-l.startAngle>=.25,n=e=>F(e,l.data),d={d:t.path(l)||"",fill:I.fill(l.data)};return r&&(d.onMouseMove=n,d.onMouseLeave=w),e.jsxs("g",{children:[e.jsx("path",{...d}),s&&e.jsx("text",{x:i,y:o,dy:".33em",fill:N.labelBackgroundColor||c.labelBackgroundColor,fontSize:12,textAnchor:"middle",pointerEvents:"none",children:l.data.label})]},`arc-${a}`)}))})})}),p&&e.jsx(g,{items:W,orientation:u,className:_["pie-chart-legend"]}),r&&C&&M&&e.jsx(x,{data:M,top:T||0,left:k||0,style:{transform:"translate(-50%, -100%)"}})]})};f.displayName="PieChart";var j=function(t,l){const{maxWidth:a=1200,aspectRatio:i=.5,debounceTime:o=50}=l||{};return function(l){const{parentRef:s,width:n}=d.useParentSize({debounceTime:o,enableDebounceLeadingCall:!0,initialSize:{width:600,height:400}}),r=n?Math.min(n,a):600,c=r*i;return e.jsx("div",{ref:s,style:{width:"100%",minHeight:`${c}px`},children:e.jsx(t,{width:r,height:c,size:r,...l})})}}(f);exports.PieChart=j;
//# sourceMappingURL=index.js.map
