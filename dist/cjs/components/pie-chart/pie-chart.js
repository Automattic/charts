"use strict";var e=require("react/jsx-runtime"),a=require("@visx/group"),s=require("@visx/shape"),r=require("clsx");require("react");var t=require("../../hooks/use-chart-mouse-handler.js"),i=require("../../providers/theme/theme-provider.js"),l=require("../../providers/theme/themes.js"),o=require("../legend/base-legend.js"),n=require("../shared/with-responsive.js"),d=require("../tooltip/base-tooltip.js"),c=require("./pie-chart.module.scss.js");const u=({data:n,withTooltips:u=!1,className:h,showLegend:p,legendOrientation:m,size:v,thickness:g=1,padding:x=20,gapScale:j=0,cornerScale:f=0,children:q=null})=>{const M=i.useChartTheme(),{onMouseMove:b,onMouseLeave:w,tooltipOpen:N,tooltipData:T,tooltipLeft:V,tooltipTop:A}=t({withTooltips:u}),{isValid:B,message:L}=(e=>{if(!e.length)return{isValid:!1,message:"No data available"};if(e.some((e=>e.percentage<0||e.value<0)))return{isValid:!1,message:"Invalid data: Negative values are not allowed"};const a=e.reduce(((e,a)=>e+a.percentage),0);return Math.abs(a-100)>.01?{isValid:!1,message:"Invalid percentage total: Must equal 100"}:{isValid:!0,message:""}})(n);if(!B)return e.jsx("div",{className:r("pie-chart",c["pie-chart"],h),children:e.jsx("div",{className:c["error-message"],children:L})});const R=v,k=v,y=Math.min(R,k)/2,C=R/2,S=k/2,I=j*(2*Math.PI/n.length),P=y-x,$=P*(1-g),z=(P-$)/2,O=f?Math.min(f*P,z):0,D=n.map(((e,a)=>({...e,index:a}))),E={value:e=>e.value,fill:e=>e?.color||M.colors[e.index]},G=n.map(((e,a)=>({label:e.label,value:e.value.toString(),color:M.colors[a%M.colors.length]})));return e.jsxs("div",{className:r("pie-chart",c["pie-chart"],h),children:[e.jsx("svg",{viewBox:`0 0 ${v} ${v}`,preserveAspectRatio:"xMidYMid meet",width:v,height:v,children:e.jsxs(a.Group,{top:S,left:C,children:[e.jsx(s.Pie,{data:D,pieValue:E.value,outerRadius:P,innerRadius:$,padAngle:I,cornerRadius:O,children:a=>a.arcs.map(((s,r)=>{const[t,i]=a.path.centroid(s),o=s.endAngle-s.startAngle>=.25,n=e=>b(e,s.data),d={d:a.path(s)||"",fill:E.fill(s.data)};return u&&(d.onMouseMove=n,d.onMouseLeave=w),e.jsxs("g",{children:[e.jsx("path",{...d}),o&&e.jsx("text",{x:t,y:i,dy:".33em",fill:M.labelBackgroundColor||l.defaultTheme.labelBackgroundColor,fontSize:12,textAnchor:"middle",pointerEvents:"none",children:s.data.label})]},`arc-${r}`)}))}),q]})}),p&&e.jsx(o.BaseLegend,{items:G,orientation:m,className:c["pie-chart-legend"]}),u&&N&&T&&e.jsx(d.BaseTooltip,{data:T,top:A||0,left:V||0,style:{transform:"translate(-50%, -100%)"}})]})};u.displayName="PieChart";var h=n.withResponsive(u);module.exports=h;
//# sourceMappingURL=pie-chart.js.map
