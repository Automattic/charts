"use strict";var e=require("react/jsx-runtime"),a=require("@visx/event"),t=require("@visx/group"),i=require("@visx/shape"),l=require("@visx/text"),s=require("@visx/tooltip"),r=require("clsx"),o=require("react"),c=require("../../providers/theme/theme-provider.js"),d=require("../legend/base-legend.js"),n=require("../shared/with-responsive.js"),h=require("../tooltip/base-tooltip.js"),p=require("./pie-semi-circle-chart.module.scss.js");const u=({data:n,width:u=400,thickness:v=.4,clockwise:m=!0,withTooltips:x=!1,showLegend:g=!1,legendOrientation:j="horizontal",label:b,note:q,className:w})=>{const N=c.useChartTheme(),{tooltipOpen:T,tooltipLeft:f,tooltipTop:M,tooltipData:y,hideTooltip:A,showTooltip:P}=s.useTooltip(),C=o.useCallback(((e,t)=>{const i=a.localPoint(e);i&&P({tooltipData:t.data,tooltipLeft:i.x,tooltipTop:i.y-10})}),[P]),I=o.useCallback((()=>{A()}),[A]),V=o.useCallback((e=>a=>{C(a,e)}),[C]),{isValid:k,message:D}=(e=>e.length?e.some((e=>e.percentage<0||e.value<0))?{isValid:!1,message:"Invalid data: Negative values are not allowed"}:e.reduce(((e,a)=>e+a.percentage),0)<=0?{isValid:!1,message:"Invalid percentage total: Must be greater than 0"}:{isValid:!0,message:""}:{isValid:!1,message:"No data available"})(n);if(!k)return e.jsx("div",{className:p["pie-semi-circle-chart"],children:e.jsx("svg",{width:u,height:u/2,"data-testid":"pie-chart-svg",children:e.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",className:p.error,children:D})})});const L=u/2,R=.03,B=u-.06,S=L-R,G=Math.min(B,2*S)/2,O=G*(1-v+R),$=n.map(((e,a)=>({...e,index:a}))),z=m?-Math.PI/2:Math.PI/2,E=m?Math.PI/2:-Math.PI/2,F={value:e=>e.value,sort:(e,a)=>a.value-e.value,fill:e=>e.color||N.colors[e.index%N.colors.length]},H=n.map(((e,a)=>({label:e.label,value:e.valueDisplay||e.value.toString(),color:F.fill({...e,index:a})})));return e.jsxs("div",{className:r("pie-semi-circle-chart",p["pie-semi-circle-chart"],w),"data-testid":"pie-chart-container",children:[e.jsx("svg",{width:u,height:L,viewBox:`0 0 ${u} ${L}`,"data-testid":"pie-chart-svg",children:e.jsxs(t.Group,{top:G,left:G,children:[e.jsx(i.Pie,{data:$,pieValue:F.value,outerRadius:G,innerRadius:O,cornerRadius:3,padAngle:R,startAngle:z,endAngle:E,pieSort:F.sort,children:a=>a.arcs.map((t=>e.jsx("g",{onMouseMove:V(t),onMouseLeave:I,children:e.jsx("path",{d:a.path(t)||"",fill:F.fill(t.data),"data-testid":"pie-segment"})},t.data.label)))}),e.jsxs(t.Group,{children:[e.jsx(l.Text,{textAnchor:"middle",verticalAnchor:"start",y:-40,className:p.label,children:b}),e.jsx(l.Text,{textAnchor:"middle",verticalAnchor:"start",y:-20,className:p.note,children:q})]})]})}),x&&T&&y&&e.jsx(h.BaseTooltip,{data:{label:y.label,value:y.value,valueDisplay:y.valueDisplay},top:M||0,left:f||0}),g&&e.jsx(d.BaseLegend,{items:H,orientation:j,className:p["pie-semi-circle-chart-legend"]})]})};u.displayName="PieSemiCircleChart";var v=n.withResponsive(u);module.exports=v;
//# sourceMappingURL=pie-semi-circle-chart.js.map
