"use strict";var e=require("react/jsx-runtime"),t=require("@visx/axis"),a=require("@visx/event"),l=require("@visx/group"),i=require("@visx/scale"),o=require("@visx/shape"),r=require("@visx/tooltip"),s=require("clsx"),n=require("react"),c=require("@visx/grid"),d=require("@visx/legend"),h=require("@visx/responsive"),p=require("@visx/gradient"),m=require("@visx/xychart"),u=require("@visx/shape/lib/shapes/Pie"),g=require("@visx/text");const x={backgroundColor:"#FFFFFF",labelBackgroundColor:"#FFFFFF",colors:["#98C8DF","#006DAB","#A6DC80","#1F9828","#FF8C8F"],gridStyles:{stroke:"#787C82",strokeWidth:1},tickLength:0,gridColor:"",gridColorDark:""},v=n.createContext(x),_=()=>n.useContext(v);var b="grid-control-module__grid-control__KOnZN";const j=({width:t,height:a,xScale:l,yScale:i,gridVisibility:o="x",top:r=0})=>e.jsxs("g",{transform:`translate(0, ${r})`,className:b,children:[o.includes("x")&&e.jsx(c.GridRows,{scale:l,width:t}),o.includes("y")&&e.jsx(c.GridColumns,{scale:i,height:a})]});var f={"legend--horizontal":"legend-module__legend--horizontal__IUN13","legend--vertical":"legend-module__legend--vertical__Scfzo","legend-item":"legend-module__legend-item__feemn","legend-item-swatch":"legend-module__legend-item-swatch__nRyXf","legend-item-label":"legend-module__legend-item-label__ksx6I","legend-item-value":"legend-module__legend-item-value__d9x1j"};const y={horizontal:"row",vertical:"column"},w=({items:t,className:a,orientation:l="horizontal"})=>{const o=i.scaleOrdinal({domain:t.map((e=>e.label)),range:t.map((e=>e.color))});return e.jsx("div",{className:s(f.legend,f[`legend--${l}`],a),role:"list",children:e.jsx(d.LegendOrdinal,{scale:o,direction:y[l],shape:"rect",shapeWidth:16,shapeHeight:16,className:f["legend-items"],children:a=>e.jsx("div",{className:f[`legend--${l}`],children:a.map((a=>e.jsxs("div",{className:f["legend-item"],children:[e.jsx("svg",{width:16,height:16,children:e.jsx("rect",{width:16,height:16,fill:a.value,className:f["legend-item-swatch"]})}),e.jsxs("span",{className:f["legend-item-label"],children:[a.text,t.find((e=>e.label===a.text))?.value&&e.jsx("span",{className:f["legend-item-value"],children:t.find((e=>e.label===a.text))?.value})]})]},a.text)))})})})};function N(t,a){const{maxWidth:l=1200,aspectRatio:i=.5,debounceTime:o=50}=a||{};return function(a){const{parentRef:r,width:s}=h.useParentSize({debounceTime:o,enableDebounceLeadingCall:!0,initialSize:{width:600,height:400}}),n=s?Math.min(s,l):600,c=n*i;return e.jsx("div",{ref:r,style:{width:"100%",minHeight:`${c}px`},children:e.jsx(t,{width:n,height:c,size:n,...a})})}}var T="base-tooltip-module__tooltip__OfX6n";const C=({data:t})=>e.jsxs(e.Fragment,{children:[t?.label,": ",t?.valueDisplay||t?.value]}),k=({data:t,top:a,left:l,component:i=C,children:o,className:r})=>e.jsx("div",{className:T,style:{top:a,left:l},role:"tooltip",children:o||t&&e.jsx(i,{data:t,className:r})});var L={"bar-chart":"bar-chart-module__bar-chart__lmYNi","bar-chart-legend":"bar-chart-module__bar-chart-legend__vgKKq"};const M=({data:c,margin:d={top:20,right:20,bottom:40,left:40},withTooltips:h=!1,showLegend:p=!1,legendOrientation:m="horizontal",className:u,gridVisibility:g="x",width:x,height:v=400})=>{const b=_(),{tooltipOpen:f,tooltipLeft:y,tooltipTop:N,tooltipData:T,hideTooltip:C,showTooltip:M}=r.useTooltip(),A=n.useCallback(((e,t,l,i,o)=>{const r=a.localPoint(e);r&&M({tooltipData:{value:t,xLabel:l,yLabel:i,seriesIndex:o},tooltipLeft:r.x,tooltipTop:r.y-10})}),[M]),D=n.useCallback((()=>{C()}),[C]);if(!c?.length)return e.jsx("div",{className:s("bar-chart-empty",L["bat-chart-empty"]),children:"Empty..."});const S=d,F=x-S.left-S.right,q=v-S.top-S.bottom,P=c[0].data?.map((e=>e?.label||"")),O=i.scaleBand({range:[0,F],domain:P,padding:.2}),B=i.scaleBand({range:[0,O.bandwidth()],domain:c.map(((e,t)=>t.toString())),padding:.1}),z=i.scaleLinear({range:[q,0],domain:[0,Math.max(...c.map((e=>Math.max(...e.data.map((e=>e?.value||0))))))]}),$=c.map(((e,t)=>({label:e.label,value:"",color:b.colors[t%b.colors.length]})));return e.jsxs("div",{className:s("bar-chart",u,L["bar-chart"]),children:[e.jsx("svg",{width:x,height:v,children:e.jsxs(l.Group,{left:S.left,top:S.top,children:[e.jsx(j,{width:F,height:q,xScale:O,yScale:z,gridVisibility:g}),c.map(((t,a)=>e.jsx(l.Group,{children:t.data.map((l=>{const i=O(l?.label||"");if(void 0===i)return null;const r=B.bandwidth(),s=i+(B(a.toString())??0);return e.jsx(o.Bar,{x:s,y:z(l.value),width:r,height:q-(z(l.value)??0),fill:b.colors[a%b.colors.length],onMouseMove:h?e=>A(e,l.value,l?.label||"",t.label,a):void 0,onMouseLeave:h?D:void 0},`bar-${a}-${l.label}`)}))},a))),e.jsx(t.AxisLeft,{scale:z}),e.jsx(t.AxisBottom,{scale:O,top:q})]})}),h&&f&&T&&e.jsx(k,{top:N||0,left:y||0,children:e.jsxs("div",{children:[e.jsx("div",{children:T.yLabel}),e.jsxs("div",{children:[T.xLabel,": ",T.value]})]})}),p&&e.jsx(w,{items:$,orientation:m,className:L["bar-chart-legend"]})]})};M.displayName="BarChart";var A=N(M),D={"line-chart":"line-chart-module__line-chart__ITM3d","line-chart__tooltip":"line-chart-module__line-chart__tooltip__aqcme","line-chart__tooltip-date":"line-chart-module__line-chart__tooltip-date__4Dzab","line-chart__tooltip-row":"line-chart-module__line-chart__tooltip-row__6A37G","line-chart__tooltip-label":"line-chart-module__line-chart__tooltip-label__IvnFF"};const S=({tooltipData:t})=>{const a=t?.nearestDatum?.datum;if(!a)return null;const l=Object.entries(t?.datumByKey||{}).map((([e,{datum:t}])=>({key:e,value:t.value}))).sort(((e,t)=>t.value-e.value));return e.jsxs("div",{className:D["line-chart__tooltip"],children:[e.jsx("div",{className:D["line-chart__tooltip-date"],children:a.date.toLocaleDateString()}),l.map((t=>e.jsxs("div",{className:D["line-chart__tooltip-row"],children:[e.jsxs("span",{className:D["line-chart__tooltip-label"],children:[t.key,":"]}),e.jsx("span",{className:D["line-chart__tooltip-value"],children:t.value})]},t.key)))]})},F=e=>new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"});var q=N((({data:t,width:a,height:l,margin:i={top:20,right:20,bottom:40,left:40},className:o,withTooltips:r=!0,showLegend:n=!1,legendOrientation:c="horizontal",withGradientFill:d=!1,options:h={}})=>{const u=_();if(!t?.length)return e.jsx("div",{className:s("line-chart-empty",D["line-chart-empty"]),children:"Empty..."});const g=t.map(((e,t)=>({label:e.label,value:"",color:u.colors[t%u.colors.length]}))),x={xAccessor:e=>e.date,yAccessor:e=>e.value},v=m.buildChartTheme({backgroundColor:u.backgroundColor,colors:u.colors,gridStyles:u.gridStyles,tickLength:u?.tickLength||0,gridColor:u?.gridColor||"",gridColorDark:u?.gridColorDark||""});return e.jsxs("div",{className:s("line-chart",D["line-chart"],o),children:[e.jsxs(m.XYChart,{theme:v,width:a,height:l,margin:i,xScale:{type:"time"},yScale:{type:"linear",nice:!0},children:[e.jsx(m.AnimatedGrid,{columns:!1,numTicks:4}),e.jsx(m.AnimatedAxis,{orientation:"bottom",numTicks:5,tickFormat:F,...h?.axis?.x}),e.jsx(m.AnimatedAxis,{orientation:"left",numTicks:4,...h?.axis?.y}),t.map(((t,a)=>{const l=t.options?.stroke??v.colors[a%v.colors.length];return e.jsxs(e.Fragment,{children:[e.jsx(p.LinearGradient,{id:`area-gradient-${a+1}`,from:l,to:"white",toOpacity:.1,...t.options?.gradient}),e.jsx(m.AnimatedLineSeries,{dataKey:t?.label,data:t.data,...x,stroke:l,strokeWidth:2},t?.label),d&&e.jsx(m.AnimatedAreaSeries,{dataKey:t?.label,data:t.data,...x,stroke:l,strokeWidth:0,fill:`url(#area-gradient-${a+1})`,renderLine:!1},t?.label)]})})),r&&e.jsx(m.Tooltip,{snapTooltipToDatumX:!0,snapTooltipToDatumY:!0,showSeriesGlyphs:!0,renderTooltip:S})]}),n&&e.jsx(w,{items:g,orientation:c,className:D["line-chart-legend"]})]})}));const P=({withTooltips:e})=>{const{tooltipOpen:t,tooltipLeft:l,tooltipTop:i,tooltipData:o,hideTooltip:s,showTooltip:c}=r.useTooltip();return{onMouseMove:n.useCallback(((t,l)=>{if(!e)return;const i=a.localPoint(t);i&&c({tooltipData:l,tooltipLeft:i.x,tooltipTop:i.y-10})}),[e,c]),onMouseLeave:n.useCallback((()=>{e&&s()}),[e,s]),tooltipOpen:t,tooltipData:o||null,tooltipLeft:l,tooltipTop:i}};var O={"pie-chart":"pie-chart-module__pie-chart__R12Vh"};const B=({data:t,withTooltips:a=!1,className:i,showLegend:r,legendOrientation:n,size:c,thickness:d=1,padding:h=20,gapScale:p=0,cornerScale:m=0})=>{const u=_(),{onMouseMove:g,onMouseLeave:v,tooltipOpen:b,tooltipData:j,tooltipLeft:f,tooltipTop:y}=P({withTooltips:a}),{isValid:N,message:T}=(e=>{if(!e.length)return{isValid:!1,message:"No data available"};if(e.some((e=>e.percentage<0||e.value<0)))return{isValid:!1,message:"Invalid data: Negative values are not allowed"};const t=e.reduce(((e,t)=>e+t.percentage),0);return Math.abs(t-100)>.01?{isValid:!1,message:"Invalid percentage total: Must equal 100"}:{isValid:!0,message:""}})(t);if(!N)return e.jsx("div",{className:s("pie-chart",O["pie-chart"],i),children:e.jsx("div",{className:O["error-message"],children:T})});const C=c,L=c,M=Math.min(C,L)/2,A=C/2,D=L/2,S=p*(2*Math.PI/t.length),F=M-h,q=F*(1-d),B=(F-q)/2,z=m?Math.min(m*F,B):0,$=t.map(((e,t)=>({...e,index:t}))),G={value:e=>e.value,fill:e=>e?.color||u.colors[e.index]},I=t.map(((e,t)=>({label:e.label,value:e.value.toString(),color:u.colors[t%u.colors.length]})));return e.jsxs("div",{className:s("pie-chart",O["pie-chart"],i),children:[e.jsx("svg",{viewBox:`0 0 ${c} ${c}`,preserveAspectRatio:"xMidYMid meet",children:e.jsx(l.Group,{top:D,left:A,children:e.jsx(o.Pie,{data:$,pieValue:G.value,outerRadius:F,innerRadius:q,padAngle:S,cornerRadius:z,children:t=>t.arcs.map(((l,i)=>{const[o,r]=t.path.centroid(l),s=l.endAngle-l.startAngle>=.25,n=e=>g(e,l.data),c={d:t.path(l)||"",fill:G.fill(l.data)};return a&&(c.onMouseMove=n,c.onMouseLeave=v),e.jsxs("g",{children:[e.jsx("path",{...c}),s&&e.jsx("text",{x:o,y:r,dy:".33em",fill:u.labelBackgroundColor||x.labelBackgroundColor,fontSize:12,textAnchor:"middle",pointerEvents:"none",children:l.data.label})]},`arc-${i}`)}))})})}),r&&e.jsx(w,{items:I,orientation:n,className:O["pie-chart-legend"]}),a&&b&&j&&e.jsx(k,{data:j,top:y||0,left:f||0,style:{transform:"translate(-50%, -100%)"}})]})};B.displayName="PieChart";var z=N(B),$="pie-semi-circle-chart-module__pie-semi-circle-chart__r5jk9",G="pie-semi-circle-chart-module__pie-semi-circle-chart-legend__c8W1Y",I="pie-semi-circle-chart-module__label__nPqOg",R="pie-semi-circle-chart-module__note__LpBZQ";const V=({data:t,size:i=500,label:o,note:c,className:d,withTooltips:h=!1,clockwise:p=!0,thickness:m=.4,showLegend:x,legendOrientation:v})=>{const b=_(),{tooltipOpen:j,tooltipLeft:f,tooltipTop:y,tooltipData:N,hideTooltip:T,showTooltip:C}=r.useTooltip(),L=i/2,M=i/2,A=i/2,D=A*(1-m+.03),S=t.map(((e,t)=>({...e,index:t}))),F=p?-Math.PI/2:Math.PI/2,q=p?Math.PI/2:-Math.PI/2,P={value:e=>e.value,sort:(e,t)=>t.value-e.value,fill:e=>e.color||b.colors[e.index%b.colors.length]},O=n.useCallback(((e,t)=>{const l=a.localPoint(e);l&&C({tooltipData:t.data,tooltipLeft:l.x,tooltipTop:l.y-10})}),[C]),B=n.useCallback((()=>{T()}),[T]),z=n.useCallback((e=>t=>{O(t,e)}),[O]),V=t.map(((e,t)=>({label:e.label,value:e.valueDisplay||e.value.toString(),color:P.fill({...e,index:t})})));return e.jsxs("div",{className:s("pie-semi-circle-chart",$,d),children:[e.jsx("svg",{viewBox:`0 0 ${i} ${M}`,children:e.jsxs(l.Group,{top:L,left:L,children:[e.jsx(u,{data:S,pieValue:P.value,outerRadius:A,innerRadius:D,cornerRadius:3,padAngle:.03,startAngle:F,endAngle:q,pieSort:P.sort,children:t=>t.arcs.map((a=>e.jsx("g",{onMouseMove:z(a),onMouseLeave:B,children:e.jsx("path",{d:t.path(a)||"",fill:P.fill(a.data)})},a.data.label)))}),e.jsxs(l.Group,{children:[e.jsx(g.Text,{textAnchor:"middle",verticalAnchor:"start",y:-40,className:I,children:o}),e.jsx(g.Text,{textAnchor:"middle",verticalAnchor:"start",y:-20,className:R,children:c})]})]})}),h&&j&&N&&e.jsx(k,{data:{label:N.label,value:N.value,valueDisplay:N.valueDisplay},top:y||0,left:f||0}),x&&e.jsx(w,{items:V,orientation:v,className:G})]})};V.displayName="PieSemiCircleChart";var K=N(V);exports.BarChart=A,exports.BaseTooltip=k,exports.Legend=w,exports.LineChart=q,exports.PieChart=z,exports.PieSemiCircleChart=K,exports.ThemeProvider=({theme:t={},children:a})=>{const l={...x,...t};return e.jsx(v.Provider,{value:l,children:a})},exports.useChartMouseHandler=P;
//# sourceMappingURL=index.js.map
