import{jsxs as e,jsx as l,Fragment as t}from"react/jsx-runtime";import{AxisLeft as a,AxisBottom as i}from"@visx/axis";import{localPoint as o}from"@visx/event";import{Group as r}from"@visx/group";import{scaleOrdinal as d,scaleBand as n,scaleLinear as s}from"@visx/scale";import{Bar as c}from"@visx/shape";import{useTooltip as m}from"@visx/tooltip";import h from"clsx";import{createContext as g,useContext as v,useCallback as p}from"react";import{GridRows as u,GridColumns as b}from"@visx/grid";import{LegendOrdinal as _}from"@visx/legend";const f=g({backgroundColor:"#FFFFFF",labelBackgroundColor:"#FFFFFF",colors:["#98C8DF","#006DAB","#A6DC80","#1F9828","#FF8C8F"],gridStyles:{stroke:"#787C82",strokeWidth:1},tickLength:0,gridColor:"",gridColorDark:""});var x="grid-control-module__grid-control__KOnZN";const N=({width:t,height:a,xScale:i,yScale:o,gridVisibility:r="x",top:d=0})=>e("g",{transform:`translate(0, ${d})`,className:x,children:[r.includes("x")&&l(u,{scale:i,width:t}),r.includes("y")&&l(b,{scale:o,height:a})]});var y={"legend--horizontal":"legend-module__legend--horizontal__IUN13","legend--vertical":"legend-module__legend--vertical__Scfzo","legend-item":"legend-module__legend-item__feemn","legend-item-swatch":"legend-module__legend-item-swatch__nRyXf","legend-item-label":"legend-module__legend-item-label__ksx6I","legend-item-value":"legend-module__legend-item-value__d9x1j"};const w={horizontal:"row",vertical:"column"},F=({items:t,className:a,orientation:i="horizontal"})=>{const o=d({domain:t.map((e=>e.label)),range:t.map((e=>e.color))});return l("div",{className:h(y.legend,y[`legend--${i}`],a),role:"list",children:l(_,{scale:o,direction:w[i],shape:"rect",shapeWidth:16,shapeHeight:16,className:y["legend-items"],children:a=>l("div",{className:y[`legend--${i}`],children:a.map((a=>{var i,o;return e("div",{className:y["legend-item"],children:[l("svg",{width:16,height:16,children:l("rect",{width:16,height:16,fill:a.value,className:y["legend-item-swatch"]})}),e("span",{className:y["legend-item-label"],children:[a.text,(null===(i=t.find((e=>e.label===a.text)))||void 0===i?void 0:i.value)&&l("span",{className:y["legend-item-value"],children:null===(o=t.find((e=>e.label===a.text)))||void 0===o?void 0:o.value})]})]},a.text)}))})})})};var C="base-tooltip-module__tooltip__OfX6n";const L=({data:l})=>e(t,{children:[null==l?void 0:l.label,": ",(null==l?void 0:l.valueDisplay)||(null==l?void 0:l.value)]}),S=({data:e,top:t,left:a,component:i=L,children:o,className:r})=>l("div",{className:C,style:{top:t,left:a},role:"tooltip",children:o||e&&l(i,{data:e,className:r})});var k={"bar-chart":"bar-chart-module__bar-chart__lmYNi","bar-chart-legend":"bar-chart-module__bar-chart-legend__vgKKq"};const D=({data:t,width:d=500,height:g=500,margin:u={top:20,right:20,bottom:40,left:40},withTooltips:b=!1,showLegend:_=!1,legendOrientation:x="horizontal",className:y,gridVisibility:w="x"})=>{var C;const L=v(f),{tooltipOpen:D,tooltipLeft:z,tooltipTop:M,tooltipData:T,hideTooltip:$,showTooltip:O}=m(),B=p(((e,l,t,a,i)=>{const r=o(e);r&&O({tooltipData:{value:l,xLabel:t,yLabel:a,seriesIndex:i},tooltipLeft:r.x,tooltipTop:r.y-10})}),[O]),I=p((()=>{$()}),[$]);if(!(null==t?void 0:t.length))return l("div",{className:h("bar-chart-empty",k["bat-chart-empty"]),children:"Empty..."});const K=u,V=d-K.left-K.right,j=g-K.top-K.bottom,A=null===(C=t[0].data)||void 0===C?void 0:C.map((e=>(null==e?void 0:e.label)||"")),W=n({range:[0,V],domain:A,padding:.2}),X=n({range:[0,W.bandwidth()],domain:t.map(((e,l)=>l.toString())),padding:.1}),q=s({range:[j,0],domain:[0,Math.max(...t.map((e=>Math.max(...e.data.map((e=>(null==e?void 0:e.value)||0))))))]}),E=t.map(((e,l)=>({label:e.label,value:"",color:L.colors[l%L.colors.length]})));return e("div",{className:h("bar-chart",y,k["bar-chart"]),children:[l("svg",{width:d,height:g,children:e(r,{left:K.left,top:K.top,children:[l(N,{width:V,height:j,xScale:W,yScale:q,gridVisibility:w}),t.map(((e,t)=>l(r,{children:e.data.map((a=>{var i,o;const r=W((null==a?void 0:a.label)||"");if(void 0===r)return null;const d=X.bandwidth(),n=r+(null!==(i=X(t.toString()))&&void 0!==i?i:0);return l(c,{x:n,y:q(a.value),width:d,height:j-(null!==(o=q(a.value))&&void 0!==o?o:0),fill:L.colors[t%L.colors.length],onMouseMove:b?l=>B(l,a.value,(null==a?void 0:a.label)||"",e.label,t):void 0,onMouseLeave:b?I:void 0},`bar-${t}-${a.label}`)}))},t))),l(a,{scale:q}),l(i,{scale:W,top:j})]})}),b&&D&&T&&l(S,{top:M||0,left:z||0,children:e("div",{children:[l("div",{children:T.yLabel}),e("div",{children:[T.xLabel,": ",T.value]})]})}),_&&l(F,{items:E,orientation:x,className:k["bar-chart-legend"]})]})};D.displayName="BarChart";export{D as BarChart};
//# sourceMappingURL=index.js.map
