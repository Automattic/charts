import{jsx as e,jsxs as l,Fragment as t}from"react/jsx-runtime";import{Group as o}from"@visx/group";import{Pie as i}from"@visx/shape";import a from"clsx";import{useCallback as n,createContext as r,useContext as d}from"react";import{localPoint as s}from"@visx/event";import{useTooltip as c}from"@visx/tooltip";import{LegendOrdinal as p}from"@visx/legend";import{scaleOrdinal as m}from"@visx/scale";const h={backgroundColor:"#FFFFFF",labelBackgroundColor:"#FFFFFF",colors:["#98C8DF","#006DAB","#A6DC80","#1F9828","#FF8C8F"],gridStyles:{stroke:"#787C82",strokeWidth:1},tickLength:0,gridColor:"",gridColorDark:""},g=r(h);var u={"legend--horizontal":"legend-module__legend--horizontal__IUN13","legend--vertical":"legend-module__legend--vertical__Scfzo","legend-item":"legend-module__legend-item__feemn","legend-item-swatch":"legend-module__legend-item-swatch__nRyXf","legend-item-label":"legend-module__legend-item-label__ksx6I","legend-item-value":"legend-module__legend-item-value__d9x1j"};const v={horizontal:"row",vertical:"column"},_=({items:t,className:o,orientation:i="horizontal"})=>{const n=m({domain:t.map((e=>e.label)),range:t.map((e=>e.color))});return e("div",{className:a(u.legend,u[`legend--${i}`],o),role:"list",children:e(p,{scale:n,direction:v[i],shape:"rect",shapeWidth:16,shapeHeight:16,className:u["legend-items"],children:o=>e("div",{className:u[`legend--${i}`],children:o.map((o=>{var i,a;return l("div",{className:u["legend-item"],children:[e("svg",{width:16,height:16,children:e("rect",{width:16,height:16,fill:o.value,className:u["legend-item-swatch"]})}),l("span",{className:u["legend-item-label"],children:[o.text,(null===(i=t.find((e=>e.label===o.text)))||void 0===i?void 0:i.value)&&e("span",{className:u["legend-item-value"],children:null===(a=t.find((e=>e.label===o.text)))||void 0===a?void 0:a.value})]})]},o.text)}))})})})};var f="base-tooltip-module__tooltip__OfX6n";const x=({data:e})=>l(t,{children:[null==e?void 0:e.label,": ",(null==e?void 0:e.valueDisplay)||(null==e?void 0:e.value)]}),F=({data:l,top:t,left:o,component:i=x,children:a,className:n})=>e("div",{className:f,style:{top:t,left:o},role:"tooltip",children:a||l&&e(i,{data:l,className:n})});var b={"pie-chart":"pie-chart-module__pie-chart__R12Vh"};const N=({data:t,width:r=500,height:p=500,withTooltips:m=!1,innerRadius:u=0,className:v,showLegend:f,legendOrientation:x})=>{const N=d(g),{onMouseMove:w,onMouseLeave:C,tooltipOpen:M,tooltipData:k,tooltipLeft:D,tooltipTop:L}=(({withTooltips:e})=>{const{tooltipOpen:l,tooltipLeft:t,tooltipTop:o,tooltipData:i,hideTooltip:a,showTooltip:r}=c();return{onMouseMove:n(((l,t)=>{if(!e)return;const o=s(l);o&&r({tooltipData:t,tooltipLeft:o.x,tooltipTop:o.y-10})}),[e,r]),onMouseLeave:n((()=>{e&&a()}),[e,a]),tooltipOpen:l,tooltipData:i||null,tooltipLeft:t,tooltipTop:o}})({withTooltips:m}),T=Math.min(r,p)/2,y=r/2,z=p/2,A={value:e=>e.value,fill:e=>(null==e?void 0:e.color)||N.colors[e.index]},O=t.map(((e,l)=>({label:e.label,value:e.value.toString(),color:N.colors[l%N.colors.length]})));return l("div",{className:a("pie-chart",b["pie-chart"],v),children:[e("svg",{width:r,height:p,children:e(o,{top:z,left:y,children:e(i,{data:t,pieValue:A.value,outerRadius:T-20,innerRadius:u,children:t=>t.arcs.map(((o,i)=>{const[a,n]=t.path.centroid(o),r=o.endAngle-o.startAngle>=.25,d=e=>w(e,o.data),s={d:t.path(o)||"",fill:A.fill(o)};return m&&(s.onMouseMove=d,s.onMouseLeave=C),l("g",{children:[e("path",{...s}),r&&e("text",{x:a,y:n,dy:".33em",fill:N.labelBackgroundColor||h.labelBackgroundColor,fontSize:12,textAnchor:"middle",pointerEvents:"none",children:o.data.label})]},`arc-${i}`)}))})})}),f&&e(_,{items:O,orientation:x,className:b["pie-chart-legend"]}),m&&M&&k&&e(F,{data:k,top:L||0,left:D||0,style:{transform:"translate(-50%, -100%)"}})]})};export{N as PieChart};
//# sourceMappingURL=index.js.map
