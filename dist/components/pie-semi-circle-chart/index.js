import{jsx as e,jsxs as l,Fragment as t}from"react/jsx-runtime";import{localPoint as i}from"@visx/event";import{Group as a}from"@visx/group";import o from"@visx/shape/lib/shapes/Pie";import{Text as r}from"@visx/text";import{useTooltip as n}from"@visx/tooltip";import d from"clsx";import{createContext as s,useContext as c,useCallback as m}from"react";import{LegendOrdinal as h}from"@visx/legend";import{scaleOrdinal as p}from"@visx/scale";const v=s({backgroundColor:"#FFFFFF",labelBackgroundColor:"#FFFFFF",colors:["#98C8DF","#006DAB","#A6DC80","#1F9828","#FF8C8F"],gridStyles:{stroke:"#787C82",strokeWidth:1},tickLength:0,gridColor:"",gridColorDark:""});var g={"legend--horizontal":"legend-module__legend--horizontal__IUN13","legend--vertical":"legend-module__legend--vertical__Scfzo","legend-item":"legend-module__legend-item__feemn","legend-item-swatch":"legend-module__legend-item-swatch__nRyXf","legend-item-label":"legend-module__legend-item-label__ksx6I","legend-item-value":"legend-module__legend-item-value__d9x1j"};const u={horizontal:"row",vertical:"column"},_=({items:t,className:i,orientation:a="horizontal"})=>{const o=p({domain:t.map((e=>e.label)),range:t.map((e=>e.color))});return e("div",{className:d(g.legend,g[`legend--${a}`],i),role:"list",children:e(h,{scale:o,direction:u[a],shape:"rect",shapeWidth:16,shapeHeight:16,className:g["legend-items"],children:i=>e("div",{className:g[`legend--${a}`],children:i.map((i=>{var a,o;return l("div",{className:g["legend-item"],children:[e("svg",{width:16,height:16,children:e("rect",{width:16,height:16,fill:i.value,className:g["legend-item-swatch"]})}),l("span",{className:g["legend-item-label"],children:[i.text,(null===(a=t.find((e=>e.label===i.text)))||void 0===a?void 0:a.value)&&e("span",{className:g["legend-item-value"],children:null===(o=t.find((e=>e.label===i.text)))||void 0===o?void 0:o.value})]})]},i.text)}))})})})};var f="base-tooltip-module__tooltip__OfX6n";const x=({data:e})=>l(t,{children:[null==e?void 0:e.label,": ",(null==e?void 0:e.valueDisplay)||(null==e?void 0:e.value)]}),b=({data:l,top:t,left:i,component:a=x,children:o,className:r})=>e("div",{className:f,style:{top:t,left:i},role:"tooltip",children:o||l&&e(a,{data:l,className:r})});var F="pie-semi-circle-chart-module__pie-semi-circle-chart__r5jk9",N="pie-semi-circle-chart-module__pie-semi-circle-chart-legend__c8W1Y",w="pie-semi-circle-chart-module__label__nPqOg",k="pie-semi-circle-chart-module__note__LpBZQ";const y=({data:t,width:s=500,label:h,note:p,className:g,withTooltips:u=!1,clockwise:f=!0,thickness:x=.4,showLegend:y,legendOrientation:D})=>{const A=c(v),{tooltipOpen:C,tooltipLeft:M,tooltipTop:I,tooltipData:L,hideTooltip:P,showTooltip:z}=n(),T=s/2,O=s/2,R=s/2,S=R*(1-x+.03),j=t.map(((e,l)=>({...e,index:l}))),B=f?-Math.PI/2:Math.PI/2,W=f?Math.PI/2:-Math.PI/2,X={value:e=>e.value,sort:(e,l)=>l.value-e.value,fill:e=>e.color||A.colors[e.index%A.colors.length]},$=m(((e,l)=>{const t=i(e);t&&z({tooltipData:l.data,tooltipLeft:t.x,tooltipTop:t.y-10})}),[z]),q=m((()=>{P()}),[P]),H=m((e=>l=>{$(l,e)}),[$]),Q=t.map(((e,l)=>({label:e.label,value:e.valueDisplay||e.value.toString(),color:X.fill({...e,index:l})})));return l("div",{className:d("pie-semi-circle-chart",F,g),children:[e("svg",{width:s,height:O,children:l(a,{top:T,left:T,children:[e(o,{data:j,pieValue:X.value,outerRadius:R,innerRadius:S,cornerRadius:3,padAngle:.03,startAngle:B,endAngle:W,pieSort:X.sort,children:l=>l.arcs.map((t=>e("g",{onMouseMove:H(t),onMouseLeave:q,children:e("path",{d:l.path(t)||"",fill:X.fill(t.data)})},t.data.label)))}),l(a,{children:[e(r,{textAnchor:"middle",verticalAnchor:"start",y:-40,className:w,children:h}),e(r,{textAnchor:"middle",verticalAnchor:"start",y:-20,className:k,children:p})]})]})}),u&&C&&L&&e(b,{data:{label:L.label,value:L.value,valueDisplay:L.valueDisplay},top:I||0,left:M||0}),y&&e(_,{items:Q,orientation:D,className:N})]})};export{y as PieSemiCircleChart};
//# sourceMappingURL=index.js.map
