"use strict";var e=require("react/jsx-runtime"),l=require("@visx/axis"),t=require("@visx/event"),a=require("@visx/group"),i=require("@visx/scale"),o=require("@visx/shape"),r=require("@visx/tooltip"),s=require("clsx"),n=require("react"),d=require("@visx/grid"),c=require("@visx/legend"),h=require("@visx/xychart"),p=require("@visx/shape/lib/shapes/Pie"),u=require("@visx/text");const m={backgroundColor:"#FFFFFF",labelBackgroundColor:"#FFFFFF",colors:["#98C8DF","#006DAB","#A6DC80","#1F9828","#FF8C8F"],gridStyles:{stroke:"#787C82",strokeWidth:1},tickLength:0,gridColor:"",gridColorDark:""},v=n.createContext(m),x=()=>n.useContext(v);var g="grid-control-module__grid-control__KOnZN";const _=({width:l,height:t,xScale:a,yScale:i,gridVisibility:o="x",top:r=0})=>e.jsxs("g",{transform:`translate(0, ${r})`,className:g,children:[o.includes("x")&&e.jsx(d.GridRows,{scale:a,width:l}),o.includes("y")&&e.jsx(d.GridColumns,{scale:i,height:t})]});var b={"legend--horizontal":"legend-module__legend--horizontal__IUN13","legend--vertical":"legend-module__legend--vertical__Scfzo","legend-item":"legend-module__legend-item__feemn","legend-item-swatch":"legend-module__legend-item-swatch__nRyXf","legend-item-label":"legend-module__legend-item-label__ksx6I","legend-item-value":"legend-module__legend-item-value__d9x1j"};const j={horizontal:"row",vertical:"column"},f=({items:l,className:t,orientation:a="horizontal"})=>{const o=i.scaleOrdinal({domain:l.map((e=>e.label)),range:l.map((e=>e.color))});return e.jsx("div",{className:s(b.legend,b[`legend--${a}`],t),role:"list",children:e.jsx(c.LegendOrdinal,{scale:o,direction:j[a],shape:"rect",shapeWidth:16,shapeHeight:16,className:b["legend-items"],children:t=>e.jsx("div",{className:b[`legend--${a}`],children:t.map((t=>{var a,i;return e.jsxs("div",{className:b["legend-item"],children:[e.jsx("svg",{width:16,height:16,children:e.jsx("rect",{width:16,height:16,fill:t.value,className:b["legend-item-swatch"]})}),e.jsxs("span",{className:b["legend-item-label"],children:[t.text,(null===(a=l.find((e=>e.label===t.text)))||void 0===a?void 0:a.value)&&e.jsx("span",{className:b["legend-item-value"],children:null===(i=l.find((e=>e.label===t.text)))||void 0===i?void 0:i.value})]})]},t.text)}))})})})};var y="base-tooltip-module__tooltip__OfX6n";const w=({data:l})=>e.jsxs(e.Fragment,{children:[null==l?void 0:l.label,": ",(null==l?void 0:l.valueDisplay)||(null==l?void 0:l.value)]}),T=({data:l,top:t,left:a,component:i=w,children:o,className:r})=>e.jsx("div",{className:y,style:{top:t,left:a},role:"tooltip",children:o||l&&e.jsx(i,{data:l,className:r})});var N={"bar-chart":"bar-chart-module__bar-chart__lmYNi","bar-chart-legend":"bar-chart-module__bar-chart-legend__vgKKq"};const C=({data:d,width:c=500,height:h=500,margin:p={top:20,right:20,bottom:40,left:40},withTooltips:u=!1,showLegend:m=!1,legendOrientation:v="horizontal",className:g,gridVisibility:b="x"})=>{var j;const y=x(),{tooltipOpen:w,tooltipLeft:C,tooltipTop:k,tooltipData:L,hideTooltip:D,showTooltip:M}=r.useTooltip(),A=n.useCallback(((e,l,a,i,o)=>{const r=t.localPoint(e);r&&M({tooltipData:{value:l,xLabel:a,yLabel:i,seriesIndex:o},tooltipLeft:r.x,tooltipTop:r.y-10})}),[M]),F=n.useCallback((()=>{D()}),[D]);if(!(null==d?void 0:d.length))return e.jsx("div",{className:s("bar-chart-empty",N["bat-chart-empty"]),children:"Empty..."});const S=p,q=c-S.left-S.right,O=h-S.top-S.bottom,P=null===(j=d[0].data)||void 0===j?void 0:j.map((e=>(null==e?void 0:e.label)||"")),B=i.scaleBand({range:[0,q],domain:P,padding:.2}),G=i.scaleBand({range:[0,B.bandwidth()],domain:d.map(((e,l)=>l.toString())),padding:.1}),z=i.scaleLinear({range:[O,0],domain:[0,Math.max(...d.map((e=>Math.max(...e.data.map((e=>(null==e?void 0:e.value)||0))))))]}),I=d.map(((e,l)=>({label:e.label,value:"",color:y.colors[l%y.colors.length]})));return e.jsxs("div",{className:s("bar-chart",g,N["bar-chart"]),children:[e.jsx("svg",{width:c,height:h,children:e.jsxs(a.Group,{left:S.left,top:S.top,children:[e.jsx(_,{width:q,height:O,xScale:B,yScale:z,gridVisibility:b}),d.map(((l,t)=>e.jsx(a.Group,{children:l.data.map((a=>{var i,r;const s=B((null==a?void 0:a.label)||"");if(void 0===s)return null;const n=G.bandwidth(),d=s+(null!==(i=G(t.toString()))&&void 0!==i?i:0);return e.jsx(o.Bar,{x:d,y:z(a.value),width:n,height:O-(null!==(r=z(a.value))&&void 0!==r?r:0),fill:y.colors[t%y.colors.length],onMouseMove:u?e=>A(e,a.value,(null==a?void 0:a.label)||"",l.label,t):void 0,onMouseLeave:u?F:void 0},`bar-${t}-${a.label}`)}))},t))),e.jsx(l.AxisLeft,{scale:z}),e.jsx(l.AxisBottom,{scale:B,top:O})]})}),u&&w&&L&&e.jsx(T,{top:k||0,left:C||0,children:e.jsxs("div",{children:[e.jsx("div",{children:L.yLabel}),e.jsxs("div",{children:[L.xLabel,": ",L.value]})]})}),m&&e.jsx(f,{items:I,orientation:v,className:N["bar-chart-legend"]})]})};C.displayName="BarChart";var k={"line-chart":"line-chart-module__line-chart__ITM3d","line-chart__tooltip":"line-chart-module__line-chart__tooltip__aqcme","line-chart__tooltip-date":"line-chart-module__line-chart__tooltip-date__4Dzab","line-chart__tooltip-row":"line-chart-module__line-chart__tooltip-row__6A37G","line-chart__tooltip-label":"line-chart-module__line-chart__tooltip-label__IvnFF"};const L=({tooltipData:l})=>{var t;const a=null===(t=null==l?void 0:l.nearestDatum)||void 0===t?void 0:t.datum;if(!a)return null;const i=Object.entries((null==l?void 0:l.datumByKey)||{}).map((([e,{datum:l}])=>({key:e,value:l.value}))).sort(((e,l)=>l.value-e.value));return e.jsxs("div",{className:k["line-chart__tooltip"],children:[e.jsx("div",{className:k["line-chart__tooltip-date"],children:a.date.toLocaleDateString()}),i.map((l=>e.jsxs("div",{className:k["line-chart__tooltip-row"],children:[e.jsxs("span",{className:k["line-chart__tooltip-label"],children:[l.key,":"]}),e.jsx("span",{className:k["line-chart__tooltip-value"],children:l.value})]},l.key)))]})},D=e=>new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"}),M=({withTooltips:e})=>{const{tooltipOpen:l,tooltipLeft:a,tooltipTop:i,tooltipData:o,hideTooltip:s,showTooltip:d}=r.useTooltip();return{onMouseMove:n.useCallback(((l,a)=>{if(!e)return;const i=t.localPoint(l);i&&d({tooltipData:a,tooltipLeft:i.x,tooltipTop:i.y-10})}),[e,d]),onMouseLeave:n.useCallback((()=>{e&&s()}),[e,s]),tooltipOpen:l,tooltipData:o||null,tooltipLeft:a,tooltipTop:i}};var A={"pie-chart":"pie-chart-module__pie-chart__R12Vh"};var F="pie-semi-circle-chart-module__pie-semi-circle-chart__r5jk9",S="pie-semi-circle-chart-module__pie-semi-circle-chart-legend__c8W1Y",q="pie-semi-circle-chart-module__label__nPqOg",O="pie-semi-circle-chart-module__note__LpBZQ";exports.BarChart=C,exports.BaseTooltip=T,exports.Legend=f,exports.LineChart=({data:l,width:t,height:a,margin:i={top:20,right:20,bottom:40,left:40},className:o,withTooltips:r=!0,showLegend:n=!1,legendOrientation:d="horizontal"})=>{const c=x();if(!(null==l?void 0:l.length))return e.jsx("div",{className:s("line-chart-empty",k["line-chart-empty"]),children:"Empty..."});const p=l.map(((e,l)=>({label:e.label,value:"",color:c.colors[l%c.colors.length]}))),u={xAccessor:e=>e.date,yAccessor:e=>e.value},m=h.buildChartTheme({backgroundColor:c.backgroundColor,colors:c.colors,gridStyles:c.gridStyles,tickLength:(null==c?void 0:c.tickLength)||0,gridColor:(null==c?void 0:c.gridColor)||"",gridColorDark:(null==c?void 0:c.gridColorDark)||""});return e.jsxs("div",{className:s("line-chart",k["line-chart"],o),children:[e.jsxs(h.XYChart,{theme:m,width:t,height:a,margin:i,xScale:{type:"time"},yScale:{type:"linear",nice:!0},children:[e.jsx(h.AnimatedGrid,{columns:!1,numTicks:4}),e.jsx(h.AnimatedAxis,{orientation:"bottom",numTicks:5,tickFormat:D}),e.jsx(h.AnimatedAxis,{orientation:"left",numTicks:4}),l.map(((l,t)=>e.jsx(h.AnimatedLineSeries,{dataKey:null==l?void 0:l.label,data:l.data,...u,stroke:m.colors[t%m.colors.length],strokeWidth:2},null==l?void 0:l.label))),r&&e.jsx(h.Tooltip,{snapTooltipToDatumX:!0,snapTooltipToDatumY:!0,showSeriesGlyphs:!0,renderTooltip:L})]}),n&&e.jsx(f,{items:p,orientation:d,className:k["line-chart-legend"]})]})},exports.PieChart=({data:l,width:t=500,height:i=500,withTooltips:r=!1,innerRadius:n=0,className:d,showLegend:c,legendOrientation:h})=>{const p=x(),{onMouseMove:u,onMouseLeave:v,tooltipOpen:g,tooltipData:_,tooltipLeft:b,tooltipTop:j}=M({withTooltips:r}),y=Math.min(t,i)/2,w=t/2,N=i/2,C={value:e=>e.value,fill:e=>(null==e?void 0:e.color)||p.colors[e.index]},k=l.map(((e,l)=>({label:e.label,value:e.value.toString(),color:p.colors[l%p.colors.length]})));return e.jsxs("div",{className:s("pie-chart",A["pie-chart"],d),children:[e.jsx("svg",{width:t,height:i,children:e.jsx(a.Group,{top:N,left:w,children:e.jsx(o.Pie,{data:l,pieValue:C.value,outerRadius:y-20,innerRadius:n,children:l=>l.arcs.map(((t,a)=>{const[i,o]=l.path.centroid(t),s=t.endAngle-t.startAngle>=.25,n=e=>u(e,t.data),d={d:l.path(t)||"",fill:C.fill(t)};return r&&(d.onMouseMove=n,d.onMouseLeave=v),e.jsxs("g",{children:[e.jsx("path",{...d}),s&&e.jsx("text",{x:i,y:o,dy:".33em",fill:p.labelBackgroundColor||m.labelBackgroundColor,fontSize:12,textAnchor:"middle",pointerEvents:"none",children:t.data.label})]},`arc-${a}`)}))})})}),c&&e.jsx(f,{items:k,orientation:h,className:A["pie-chart-legend"]}),r&&g&&_&&e.jsx(T,{data:_,top:j||0,left:b||0,style:{transform:"translate(-50%, -100%)"}})]})},exports.PieSemiCircleChart=({data:l,width:i=500,label:o,note:d,className:c,withTooltips:h=!1,clockwise:m=!0,thickness:v=.4,showLegend:g,legendOrientation:_})=>{const b=x(),{tooltipOpen:j,tooltipLeft:y,tooltipTop:w,tooltipData:N,hideTooltip:C,showTooltip:k}=r.useTooltip(),L=i/2,D=i/2,M=i/2,A=M*(1-v+.03),P=l.map(((e,l)=>({...e,index:l}))),B=m?-Math.PI/2:Math.PI/2,G=m?Math.PI/2:-Math.PI/2,z={value:e=>e.value,sort:(e,l)=>l.value-e.value,fill:e=>e.color||b.colors[e.index%b.colors.length]},I=n.useCallback(((e,l)=>{const a=t.localPoint(e);a&&k({tooltipData:l.data,tooltipLeft:a.x,tooltipTop:a.y-10})}),[k]),R=n.useCallback((()=>{C()}),[C]),V=n.useCallback((e=>l=>{I(l,e)}),[I]),$=l.map(((e,l)=>({label:e.label,value:e.valueDisplay||e.value.toString(),color:z.fill({...e,index:l})})));return e.jsxs("div",{className:s("pie-semi-circle-chart",F,c),children:[e.jsx("svg",{width:i,height:D,children:e.jsxs(a.Group,{top:L,left:L,children:[e.jsx(p,{data:P,pieValue:z.value,outerRadius:M,innerRadius:A,cornerRadius:3,padAngle:.03,startAngle:B,endAngle:G,pieSort:z.sort,children:l=>l.arcs.map((t=>e.jsx("g",{onMouseMove:V(t),onMouseLeave:R,children:e.jsx("path",{d:l.path(t)||"",fill:z.fill(t.data)})},t.data.label)))}),e.jsxs(a.Group,{children:[e.jsx(u.Text,{textAnchor:"middle",verticalAnchor:"start",y:-40,className:q,children:o}),e.jsx(u.Text,{textAnchor:"middle",verticalAnchor:"start",y:-20,className:O,children:d})]})]})}),h&&j&&N&&e.jsx(T,{data:{label:N.label,value:N.value,valueDisplay:N.valueDisplay},top:w||0,left:y||0}),g&&e.jsx(f,{items:$,orientation:_,className:S})]})},exports.ThemeProvider=({theme:l={},children:t})=>{const a={...m,...l};return e.jsx(v.Provider,{value:a,children:t})},exports.useChartMouseHandler=M;
//# sourceMappingURL=index.js.map
