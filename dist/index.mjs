import{jsx as e,jsxs as l,Fragment as t}from"react/jsx-runtime";import{AxisLeft as o,AxisBottom as a}from"@visx/axis";import{localPoint as i}from"@visx/event";import{Group as r}from"@visx/group";import{scaleOrdinal as n,scaleBand as d,scaleLinear as c}from"@visx/scale";import{Bar as s,Pie as h}from"@visx/shape";import{useTooltip as p}from"@visx/tooltip";import m from"clsx";import{createContext as u,useContext as v,useCallback as g}from"react";import{GridRows as _,GridColumns as b}from"@visx/grid";import{LegendOrdinal as f}from"@visx/legend";import{buildChartTheme as x,XYChart as y,AnimatedGrid as w,AnimatedAxis as N,AnimatedLineSeries as T,Tooltip as L}from"@visx/xychart";import k from"@visx/shape/lib/shapes/Pie";import{Text as D}from"@visx/text";const M={backgroundColor:"#FFFFFF",labelBackgroundColor:"#FFFFFF",colors:["#98C8DF","#006DAB","#A6DC80","#1F9828","#FF8C8F"],gridStyles:{stroke:"#787C82",strokeWidth:1},tickLength:0,gridColor:"",gridColorDark:""},F=u(M),S=()=>v(F),C=({theme:l={},children:t})=>{const o={...M,...l};return e(F.Provider,{value:o,children:t})};var A="grid-control-module__grid-control__KOnZN";const O=({width:t,height:o,xScale:a,yScale:i,gridVisibility:r="x",top:n=0})=>l("g",{transform:`translate(0, ${n})`,className:A,children:[r.includes("x")&&e(_,{scale:a,width:t}),r.includes("y")&&e(b,{scale:i,height:o})]});var z={"legend--horizontal":"legend-module__legend--horizontal__IUN13","legend--vertical":"legend-module__legend--vertical__Scfzo","legend-item":"legend-module__legend-item__feemn","legend-item-swatch":"legend-module__legend-item-swatch__nRyXf","legend-item-label":"legend-module__legend-item-label__ksx6I","legend-item-value":"legend-module__legend-item-value__d9x1j"};const I={horizontal:"row",vertical:"column"},R=({items:t,className:o,orientation:a="horizontal"})=>{const i=n({domain:t.map((e=>e.label)),range:t.map((e=>e.color))});return e("div",{className:m(z.legend,z[`legend--${a}`],o),role:"list",children:e(f,{scale:i,direction:I[a],shape:"rect",shapeWidth:16,shapeHeight:16,className:z["legend-items"],children:o=>e("div",{className:z[`legend--${a}`],children:o.map((o=>{var a,i;return l("div",{className:z["legend-item"],children:[e("svg",{width:16,height:16,children:e("rect",{width:16,height:16,fill:o.value,className:z["legend-item-swatch"]})}),l("span",{className:z["legend-item-label"],children:[o.text,(null===(a=t.find((e=>e.label===o.text)))||void 0===a?void 0:a.value)&&e("span",{className:z["legend-item-value"],children:null===(i=t.find((e=>e.label===o.text)))||void 0===i?void 0:i.value})]})]},o.text)}))})})})};var B="base-tooltip-module__tooltip__OfX6n";const P=({data:e})=>l(t,{children:[null==e?void 0:e.label,": ",(null==e?void 0:e.valueDisplay)||(null==e?void 0:e.value)]}),V=({data:l,top:t,left:o,component:a=P,children:i,className:r})=>e("div",{className:B,style:{top:t,left:o},role:"tooltip",children:i||l&&e(a,{data:l,className:r})});var $={"bar-chart":"bar-chart-module__bar-chart__lmYNi","bar-chart-legend":"bar-chart-module__bar-chart-legend__vgKKq"};const K=({data:t,width:n=500,height:h=500,margin:u={top:20,right:20,bottom:40,left:40},withTooltips:v=!1,showLegend:_=!1,legendOrientation:b="horizontal",className:f,gridVisibility:x="x"})=>{var y;const w=S(),{tooltipOpen:N,tooltipLeft:T,tooltipTop:L,tooltipData:k,hideTooltip:D,showTooltip:M}=p(),F=g(((e,l,t,o,a)=>{const r=i(e);r&&M({tooltipData:{value:l,xLabel:t,yLabel:o,seriesIndex:a},tooltipLeft:r.x,tooltipTop:r.y-10})}),[M]),C=g((()=>{D()}),[D]);if(!(null==t?void 0:t.length))return e("div",{className:m("bar-chart-empty",$["bat-chart-empty"]),children:"Empty..."});const A=u,z=n-A.left-A.right,I=h-A.top-A.bottom,B=null===(y=t[0].data)||void 0===y?void 0:y.map((e=>(null==e?void 0:e.label)||"")),P=d({range:[0,z],domain:B,padding:.2}),K=d({range:[0,P.bandwidth()],domain:t.map(((e,l)=>l.toString())),padding:.1}),j=c({range:[I,0],domain:[0,Math.max(...t.map((e=>Math.max(...e.data.map((e=>(null==e?void 0:e.value)||0))))))]}),W=t.map(((e,l)=>({label:e.label,value:"",color:w.colors[l%w.colors.length]})));return l("div",{className:m("bar-chart",f,$["bar-chart"]),children:[e("svg",{width:n,height:h,children:l(r,{left:A.left,top:A.top,children:[e(O,{width:z,height:I,xScale:P,yScale:j,gridVisibility:x}),t.map(((l,t)=>e(r,{children:l.data.map((o=>{var a,i;const r=P((null==o?void 0:o.label)||"");if(void 0===r)return null;const n=K.bandwidth(),d=r+(null!==(a=K(t.toString()))&&void 0!==a?a:0);return e(s,{x:d,y:j(o.value),width:n,height:I-(null!==(i=j(o.value))&&void 0!==i?i:0),fill:w.colors[t%w.colors.length],onMouseMove:v?e=>F(e,o.value,(null==o?void 0:o.label)||"",l.label,t):void 0,onMouseLeave:v?C:void 0},`bar-${t}-${o.label}`)}))},t))),e(o,{scale:j}),e(a,{scale:P,top:I})]})}),v&&N&&k&&e(V,{top:L||0,left:T||0,children:l("div",{children:[e("div",{children:k.yLabel}),l("div",{children:[k.xLabel,": ",k.value]})]})}),_&&e(R,{items:W,orientation:b,className:$["bar-chart-legend"]})]})};K.displayName="BarChart";var j={"line-chart":"line-chart-module__line-chart__ITM3d","line-chart__tooltip":"line-chart-module__line-chart__tooltip__aqcme","line-chart__tooltip-date":"line-chart-module__line-chart__tooltip-date__4Dzab","line-chart__tooltip-row":"line-chart-module__line-chart__tooltip-row__6A37G","line-chart__tooltip-label":"line-chart-module__line-chart__tooltip-label__IvnFF"};const W=({tooltipData:t})=>{var o;const a=null===(o=null==t?void 0:t.nearestDatum)||void 0===o?void 0:o.datum;if(!a)return null;const i=Object.entries((null==t?void 0:t.datumByKey)||{}).map((([e,{datum:l}])=>({key:e,value:l.value}))).sort(((e,l)=>l.value-e.value));return l("div",{className:j["line-chart__tooltip"],children:[e("div",{className:j["line-chart__tooltip-date"],children:a.date.toLocaleDateString()}),i.map((t=>l("div",{className:j["line-chart__tooltip-row"],children:[l("span",{className:j["line-chart__tooltip-label"],children:[t.key,":"]}),e("span",{className:j["line-chart__tooltip-value"],children:t.value})]},t.key)))]})},q=e=>new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"}),E=({data:t,width:o,height:a,margin:i={top:20,right:20,bottom:40,left:40},className:r,withTooltips:n=!0,showLegend:d=!1,legendOrientation:c="horizontal"})=>{const s=S();if(!(null==t?void 0:t.length))return e("div",{className:m("line-chart-empty",j["line-chart-empty"]),children:"Empty..."});const h=t.map(((e,l)=>({label:e.label,value:"",color:s.colors[l%s.colors.length]}))),p={xAccessor:e=>e.date,yAccessor:e=>e.value},u=x({backgroundColor:s.backgroundColor,colors:s.colors,gridStyles:s.gridStyles,tickLength:(null==s?void 0:s.tickLength)||0,gridColor:(null==s?void 0:s.gridColor)||"",gridColorDark:(null==s?void 0:s.gridColorDark)||""});return l("div",{className:m("line-chart",j["line-chart"],r),children:[l(y,{theme:u,width:o,height:a,margin:i,xScale:{type:"time"},yScale:{type:"linear",nice:!0},children:[e(w,{columns:!1,numTicks:4}),e(N,{orientation:"bottom",numTicks:5,tickFormat:q}),e(N,{orientation:"left",numTicks:4}),t.map(((l,t)=>e(T,{dataKey:null==l?void 0:l.label,data:l.data,...p,stroke:u.colors[t%u.colors.length],strokeWidth:2},null==l?void 0:l.label))),n&&e(L,{snapTooltipToDatumX:!0,snapTooltipToDatumY:!0,showSeriesGlyphs:!0,renderTooltip:W})]}),d&&e(R,{items:h,orientation:c,className:j["line-chart-legend"]})]})},X=({withTooltips:e})=>{const{tooltipOpen:l,tooltipLeft:t,tooltipTop:o,tooltipData:a,hideTooltip:r,showTooltip:n}=p();return{onMouseMove:g(((l,t)=>{if(!e)return;const o=i(l);o&&n({tooltipData:t,tooltipLeft:o.x,tooltipTop:o.y-10})}),[e,n]),onMouseLeave:g((()=>{e&&r()}),[e,r]),tooltipOpen:l,tooltipData:a||null,tooltipLeft:t,tooltipTop:o}};var Y={"pie-chart":"pie-chart-module__pie-chart__R12Vh"};const G=({data:t,width:o=500,height:a=500,withTooltips:i=!1,innerRadius:n=0,className:d,showLegend:c,legendOrientation:s})=>{const p=S(),{onMouseMove:u,onMouseLeave:v,tooltipOpen:g,tooltipData:_,tooltipLeft:b,tooltipTop:f}=X({withTooltips:i}),x=Math.min(o,a)/2,y=o/2,w=a/2,N={value:e=>e.value,fill:e=>(null==e?void 0:e.color)||p.colors[e.index]},T=t.map(((e,l)=>({label:e.label,value:e.value.toString(),color:p.colors[l%p.colors.length]})));return l("div",{className:m("pie-chart",Y["pie-chart"],d),children:[e("svg",{width:o,height:a,children:e(r,{top:w,left:y,children:e(h,{data:t,pieValue:N.value,outerRadius:x-20,innerRadius:n,children:t=>t.arcs.map(((o,a)=>{const[r,n]=t.path.centroid(o),d=o.endAngle-o.startAngle>=.25,c=e=>u(e,o.data),s={d:t.path(o)||"",fill:N.fill(o)};return i&&(s.onMouseMove=c,s.onMouseLeave=v),l("g",{children:[e("path",{...s}),d&&e("text",{x:r,y:n,dy:".33em",fill:p.labelBackgroundColor||M.labelBackgroundColor,fontSize:12,textAnchor:"middle",pointerEvents:"none",children:o.data.label})]},`arc-${a}`)}))})})}),c&&e(R,{items:T,orientation:s,className:Y["pie-chart-legend"]}),i&&g&&_&&e(V,{data:_,top:f||0,left:b||0,style:{transform:"translate(-50%, -100%)"}})]})};var Z="pie-semi-circle-chart-module__pie-semi-circle-chart__r5jk9",H="pie-semi-circle-chart-module__pie-semi-circle-chart-legend__c8W1Y",Q="pie-semi-circle-chart-module__label__nPqOg",U="pie-semi-circle-chart-module__note__LpBZQ";const J=({data:t,width:o=500,label:a,note:n,className:d,withTooltips:c=!1,clockwise:s=!0,thickness:h=.4,showLegend:u,legendOrientation:v})=>{const _=S(),{tooltipOpen:b,tooltipLeft:f,tooltipTop:x,tooltipData:y,hideTooltip:w,showTooltip:N}=p(),T=o/2,L=o/2,M=o/2,F=M*(1-h+.03),C=t.map(((e,l)=>({...e,index:l}))),A=s?-Math.PI/2:Math.PI/2,O=s?Math.PI/2:-Math.PI/2,z={value:e=>e.value,sort:(e,l)=>l.value-e.value,fill:e=>e.color||_.colors[e.index%_.colors.length]},I=g(((e,l)=>{const t=i(e);t&&N({tooltipData:l.data,tooltipLeft:t.x,tooltipTop:t.y-10})}),[N]),B=g((()=>{w()}),[w]),P=g((e=>l=>{I(l,e)}),[I]),$=t.map(((e,l)=>({label:e.label,value:e.valueDisplay||e.value.toString(),color:z.fill({...e,index:l})})));return l("div",{className:m("pie-semi-circle-chart",Z,d),children:[e("svg",{width:o,height:L,children:l(r,{top:T,left:T,children:[e(k,{data:C,pieValue:z.value,outerRadius:M,innerRadius:F,cornerRadius:3,padAngle:.03,startAngle:A,endAngle:O,pieSort:z.sort,children:l=>l.arcs.map((t=>e("g",{onMouseMove:P(t),onMouseLeave:B,children:e("path",{d:l.path(t)||"",fill:z.fill(t.data)})},t.data.label)))}),l(r,{children:[e(D,{textAnchor:"middle",verticalAnchor:"start",y:-40,className:Q,children:a}),e(D,{textAnchor:"middle",verticalAnchor:"start",y:-20,className:U,children:n})]})]})}),c&&b&&y&&e(V,{data:{label:y.label,value:y.value,valueDisplay:y.valueDisplay},top:x||0,left:f||0}),u&&e(R,{items:$,orientation:v,className:H})]})};export{K as BarChart,V as BaseTooltip,R as Legend,E as LineChart,G as PieChart,J as PieSemiCircleChart,C as ThemeProvider,X as useChartMouseHandler};
//# sourceMappingURL=index.mjs.map
