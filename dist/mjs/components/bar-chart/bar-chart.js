import{jsx as t,jsxs as o}from"react/jsx-runtime";import{AxisLeft as e,AxisBottom as i}from"@visx/axis";import{localPoint as a}from"@visx/event";import{Group as r}from"@visx/group";import{scaleBand as l,scaleLinear as s}from"@visx/scale";import{Bar as m}from"@visx/shape";import{useTooltip as p}from"@visx/tooltip";import n from"clsx";import{useCallback as d}from"react";import{useChartTheme as h}from"../../providers/theme/theme-provider.js";import c from"../grid-control/grid-control.js";import{BaseLegend as v}from"../legend/base-legend.js";import{withResponsive as g}from"../shared/with-responsive.js";import{BaseTooltip as b}from"../tooltip/base-tooltip.js";import f from"./bar-chart.module.scss.js";const x=({data:g,margin:x={top:20,right:20,bottom:40,left:40},withTooltips:u=!1,showLegend:y=!1,legendOrientation:w="horizontal",className:L,gridVisibility:j="x",width:M,height:N=400})=>{const T=h(),{tooltipOpen:S,tooltipLeft:D,tooltipTop:O,tooltipData:V,hideTooltip:$,showTooltip:z}=p(),B=d(((t,o,e,i,r)=>{const l=a(t);l&&z({tooltipData:{value:o,xLabel:e,yLabel:i,seriesIndex:r},tooltipLeft:l.x,tooltipTop:l.y-10})}),[z]),C=d((()=>{$()}),[$]);if(!g?.length)return t("div",{className:n("bar-chart-empty",f["bat-chart-empty"]),children:"Empty..."});const E=x,I=M-E.left-E.right,k=N-E.top-E.bottom,q=g[0].data?.map((t=>t?.label||"")),A=l({range:[0,I],domain:q,padding:.2}),F=l({range:[0,A.bandwidth()],domain:g.map(((t,o)=>o.toString())),padding:.1}),G=s({range:[k,0],domain:[0,Math.max(...g.map((t=>Math.max(...t.data.map((t=>t?.value||0))))))]}),H=g.map(((t,o)=>({label:t.label,value:"",color:T.colors[o%T.colors.length]})));return o("div",{className:n("bar-chart",L,f["bar-chart"]),children:[t("svg",{width:M,height:N,children:o(r,{left:E.left,top:E.top,children:[t(c,{width:I,height:k,xScale:A,yScale:G,gridVisibility:j}),g.map(((o,e)=>t(r,{children:o.data.map((i=>{const a=A(i?.label||"");if(void 0===a)return null;const r=F.bandwidth(),l=a+(F(e.toString())??0);return t(m,{x:l,y:G(i.value),width:r,height:k-(G(i.value)??0),fill:T.colors[e%T.colors.length],onMouseMove:u?t=>B(t,i.value,i?.label||"",o.label,e):void 0,onMouseLeave:u?C:void 0},`bar-${e}-${i.label}`)}))},e))),t(e,{scale:G}),t(i,{scale:A,top:k})]})}),u&&S&&V&&t(b,{top:O||0,left:D||0,children:o("div",{children:[t("div",{children:V.yLabel}),o("div",{children:[V.xLabel,": ",V.value]})]})}),y&&t(v,{items:H,orientation:w,className:f["bar-chart-legend"]})]})};x.displayName="BarChart";var u=g(x);export{u as default};
//# sourceMappingURL=bar-chart.js.map
