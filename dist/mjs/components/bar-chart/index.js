import{jsxs as e,jsx as t,Fragment as l}from"react/jsx-runtime";import{AxisLeft as a,AxisBottom as i}from"@visx/axis";import{localPoint as o}from"@visx/event";import{Group as r}from"@visx/group";import{scaleOrdinal as n,scaleBand as d,scaleLinear as s}from"@visx/scale";import{Bar as c}from"@visx/shape";import{useTooltip as m}from"@visx/tooltip";import h from"clsx";import{createContext as g,useContext as p,useCallback as v}from"react";import{GridRows as u,GridColumns as b}from"@visx/grid";import{LegendOrdinal as _}from"@visx/legend";import{useParentSize as f}from"@visx/responsive";const x=g({backgroundColor:"#FFFFFF",labelBackgroundColor:"#FFFFFF",colors:["#98C8DF","#006DAB","#A6DC80","#1F9828","#FF8C8F"],gridStyles:{stroke:"#787C82",strokeWidth:1},tickLength:0,gridColor:"",gridColorDark:""});var w="grid-control-module__grid-control__KOnZN";const N=({width:l,height:a,xScale:i,yScale:o,gridVisibility:r="x",top:n=0})=>e("g",{transform:`translate(0, ${n})`,className:w,children:[r.includes("x")&&t(u,{scale:i,width:l}),r.includes("y")&&t(b,{scale:o,height:a})]});var y={"legend--horizontal":"legend-module__legend--horizontal__IUN13","legend--vertical":"legend-module__legend--vertical__Scfzo","legend-item":"legend-module__legend-item__feemn","legend-item-swatch":"legend-module__legend-item-swatch__nRyXf","legend-item-label":"legend-module__legend-item-label__ksx6I","legend-item-value":"legend-module__legend-item-value__d9x1j"};const F={horizontal:"row",vertical:"column"},C=({items:l,className:a,orientation:i="horizontal"})=>{const o=n({domain:l.map((e=>e.label)),range:l.map((e=>e.color))});return t("div",{className:h(y.legend,y[`legend--${i}`],a),role:"list",children:t(_,{scale:o,direction:F[i],shape:"rect",shapeWidth:16,shapeHeight:16,className:y["legend-items"],children:a=>t("div",{className:y[`legend--${i}`],children:a.map((a=>e("div",{className:y["legend-item"],children:[t("svg",{width:16,height:16,children:t("rect",{width:16,height:16,fill:a.value,className:y["legend-item-swatch"]})}),e("span",{className:y["legend-item-label"],children:[a.text,l.find((e=>e.label===a.text))?.value&&t("span",{className:y["legend-item-value"],children:l.find((e=>e.label===a.text))?.value})]})]},a.text)))})})})};var L="base-tooltip-module__tooltip__OfX6n";const S=({data:t})=>e(l,{children:[t?.label,": ",t?.valueDisplay||t?.value]}),z=({data:e,top:l,left:a,component:i=S,children:o,className:r})=>t("div",{className:L,style:{top:l,left:a},role:"tooltip",children:o||e&&t(i,{data:e,className:r})});var D={"bar-chart":"bar-chart-module__bar-chart__lmYNi","bar-chart-legend":"bar-chart-module__bar-chart-legend__vgKKq"};const k=({data:l,margin:n={top:20,right:20,bottom:40,left:40},withTooltips:g=!1,showLegend:u=!1,legendOrientation:b="horizontal",className:_,gridVisibility:f="x",width:w,height:y=400})=>{const F=p(x),{tooltipOpen:L,tooltipLeft:S,tooltipTop:k,tooltipData:T,hideTooltip:M,showTooltip:$}=m(),B=v(((e,t,l,a,i)=>{const r=o(e);r&&$({tooltipData:{value:t,xLabel:l,yLabel:a,seriesIndex:i},tooltipLeft:r.x,tooltipTop:r.y-10})}),[$]),O=v((()=>{M()}),[M]);if(!l?.length)return t("div",{className:h("bar-chart-empty",D["bat-chart-empty"]),children:"Empty..."});const I=n,K=w-I.left-I.right,R=y-I.top-I.bottom,V=l[0].data?.map((e=>e?.label||"")),W=d({range:[0,K],domain:V,padding:.2}),j=d({range:[0,W.bandwidth()],domain:l.map(((e,t)=>t.toString())),padding:.1}),A=s({range:[R,0],domain:[0,Math.max(...l.map((e=>Math.max(...e.data.map((e=>e?.value||0))))))]}),H=l.map(((e,t)=>({label:e.label,value:"",color:F.colors[t%F.colors.length]})));return e("div",{className:h("bar-chart",_,D["bar-chart"]),children:[t("svg",{width:w,height:y,children:e(r,{left:I.left,top:I.top,children:[t(N,{width:K,height:R,xScale:W,yScale:A,gridVisibility:f}),l.map(((e,l)=>t(r,{children:e.data.map((a=>{const i=W(a?.label||"");if(void 0===i)return null;const o=j.bandwidth(),r=i+(j(l.toString())??0);return t(c,{x:r,y:A(a.value),width:o,height:R-(A(a.value)??0),fill:F.colors[l%F.colors.length],onMouseMove:g?t=>B(t,a.value,a?.label||"",e.label,l):void 0,onMouseLeave:g?O:void 0},`bar-${l}-${a.label}`)}))},l))),t(a,{scale:A}),t(i,{scale:W,top:R})]})}),g&&L&&T&&t(z,{top:k||0,left:S||0,children:e("div",{children:[t("div",{children:T.yLabel}),e("div",{children:[T.xLabel,": ",T.value]})]})}),u&&t(C,{items:H,orientation:b,className:D["bar-chart-legend"]})]})};k.displayName="BarChart";var T=function(e,l){const{maxWidth:a=1200,aspectRatio:i=.5,debounceTime:o=50}=l||{};return function(l){const{parentRef:r,width:n}=f({debounceTime:o,enableDebounceLeadingCall:!0,initialSize:{width:600,height:400}}),d=n?Math.min(n,a):600,s=d*i;return t("div",{ref:r,style:{width:"100%",minHeight:`${s}px`},children:t(e,{width:d,height:s,size:d,...l})})}}(k);export{T as BarChart};
//# sourceMappingURL=index.js.map
