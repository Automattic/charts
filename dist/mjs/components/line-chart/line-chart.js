import{jsx as e,jsxs as t,Fragment as o}from"react/jsx-runtime";import{curveNatural as r}from"@visx/curve";import{LinearGradient as a}from"@visx/gradient";import{buildChartTheme as i,XYChart as l,AnimatedGrid as n,AnimatedAxis as s,AnimatedAreaSeries as c,Tooltip as m}from"@visx/xychart";import d from"clsx";import{useMemo as h}from"react";import{useChartTheme as p}from"../../providers/theme/theme-provider.js";import{BaseLegend as u}from"../legend/base-legend.js";import{withResponsive as g}from"../shared/with-responsive.js";import v from"./line-chart.module.scss.js";const y=({tooltipData:o})=>{const r=o?.nearestDatum?.datum;if(!r)return null;const a=Object.entries(o?.datumByKey||{}).map((([e,{datum:t}])=>({key:e,value:t.value}))).sort(((e,t)=>t.value-e.value));return t("div",{className:v["line-chart__tooltip"],children:[e("div",{className:v["line-chart__tooltip-date"],children:r.date.toLocaleDateString()}),a.map((o=>t("div",{className:v["line-chart__tooltip-row"],children:[t("span",{className:v["line-chart__tooltip-label"],children:[o.key,":"]}),e("span",{className:v["line-chart__tooltip-value"],children:o.value})]},o.key)))]})},f=e=>new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"});var k=g((({data:g,width:k,height:x,className:b,margin:w={},withTooltips:_=!0,showLegend:D=!1,legendOrientation:N="horizontal",withGradientFill:S=!1,options:T={}})=>{const j=p(),C=h((()=>{const e=g?.map((e=>e.options?.stroke??"")).filter(Boolean)??[];return i({backgroundColor:j.backgroundColor,colors:[...e,...j.colors],gridStyles:j.gridStyles,tickLength:j?.tickLength||0,gridColor:j?.gridColor||"",gridColorDark:j?.gridColorDark||""})}),[j,g]);if(!g?.length)return e("div",{className:d("line-chart-empty",v["line-chart-empty"]),children:"Empty..."});const L=g.map(((e,t)=>({label:e.label,value:"",color:j.colors[t%j.colors.length]}))),O={xAccessor:e=>e.date,yAccessor:e=>e.value};return t("div",{className:d("line-chart",v["line-chart"],b),children:[t(l,{theme:C,width:k,height:x,margin:{top:20,right:20,bottom:40,left:40,...w},xScale:{type:"time",...T?.xScale},yScale:{type:"linear",nice:!0,zero:!1,...T?.yScale},children:[e(n,{columns:!1,numTicks:4}),e(s,{orientation:"bottom",numTicks:5,tickFormat:f,...T?.axis?.x}),e(s,{orientation:"left",numTicks:4,...T?.axis?.y}),g.map(((i,l)=>{const n=i.options?.stroke??C.colors[l%C.colors.length];return t(o,{children:[e(a,{id:`area-gradient-${l+1}`,from:n,to:"white",toOpacity:.1,...i.options?.gradient}),e(c,{dataKey:i?.label,data:i.data,...O,fill:S?`url(#area-gradient-${l+1})`:void 0,renderLine:!0,curve:r},i?.label)]})})),_&&e(m,{snapTooltipToDatumX:!0,snapTooltipToDatumY:!0,showSeriesGlyphs:!0,renderTooltip:y})]}),D&&e(u,{items:L,orientation:N,className:v["line-chart-legend"]})]})}));export{k as default};
//# sourceMappingURL=line-chart.js.map
