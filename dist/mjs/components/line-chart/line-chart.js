import{jsx as e,jsxs as t}from"react/jsx-runtime";import{curveCatmullRom as a,curveLinear as o}from"@visx/curve";import{LinearGradient as i}from"@visx/gradient";import{buildChartTheme as r,XYChart as l,AnimatedGrid as n,AnimatedAxis as s,AnimatedAreaSeries as c,Tooltip as m}from"@visx/xychart";import d from"clsx";import{useMemo as h}from"react";import{useChartTheme as p}from"../../providers/theme/theme-provider.js";import{BaseLegend as u}from"../legend/base-legend.js";import{withResponsive as v}from"../shared/with-responsive.js";import g from"./line-chart.module.scss.js";const f=({tooltipData:a})=>{const o=a?.nearestDatum?.datum;if(!o)return null;const i=Object.entries(a?.datumByKey||{}).map((([e,{datum:t}])=>({key:e,value:t.value}))).sort(((e,t)=>t.value-e.value));return t("div",{className:g["line-chart__tooltip"],children:[e("div",{className:g["line-chart__tooltip-date"],children:o.date.toLocaleDateString()}),i.map((a=>t("div",{className:g["line-chart__tooltip-row"],children:[t("span",{className:g["line-chart__tooltip-label"],children:[a.key,":"]}),e("span",{className:g["line-chart__tooltip-value"],children:a.value})]},a.key)))]})},y=e=>new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"});var x=v((({data:v,width:x,height:N,className:b,margin:w,withTooltips:T=!0,showLegend:_=!1,legendOrientation:k="horizontal",withGradientFill:D=!1,smoothing:S=!0,options:j={}})=>{const L=p(),O=h((()=>{const e=v?.map((e=>e.options?.stroke??"")).filter(Boolean)??[];return r({...L,colors:[...e,...L.colors]})}),[L,v]);w=h((()=>{let e={};return"right"===j.axis?.y?.orientation&&(e={...e,right:40,left:0}),"top"===j.axis?.x?.orientation&&(e={...e,top:40,bottom:0}),{...e,...w}}),[w,j]);const z=(e=>e?.length?e.some((e=>e.data.some((e=>isNaN(e.value)||null===e.value||void 0===e.value||isNaN(e.date.getTime())))))?"Invalid data":null:"No data available")(v);if(z)return e("div",{className:d("line-chart",g["line-chart"]),children:z});const A=v.map(((e,t)=>({label:e.label,value:"",color:L.colors[t%L.colors.length]}))),B={xAccessor:e=>e.date,yAccessor:e=>e.value};return t("div",{className:d("line-chart",g["line-chart"],b),"data-testid":"line-chart",role:"img","aria-label":"line chart",children:[t(l,{theme:O,width:x,height:N,margin:{top:0,right:0,bottom:0,left:0,...w},xScale:{type:"time",...j?.xScale},yScale:{type:"linear",nice:!0,zero:!1,...j?.yScale},children:[e(n,{columns:!1,numTicks:4}),e(s,{orientation:"bottom",numTicks:5,tickFormat:y,...j?.axis?.x}),e(s,{orientation:"left",numTicks:4,...j?.axis?.y}),v.map(((r,l)=>{const n=r.options?.stroke??O.colors[l%O.colors.length];return t("g",{children:[D&&e(i,{id:`area-gradient-${l+1}`,from:n,to:"white",toOpacity:.1,...r.options?.gradient,"data-testid":"line-gradient"}),e(c,{dataKey:r?.label,data:r.data,...B,fill:D?`url(#area-gradient-${l+1})`:void 0,renderLine:!0,curve:S?a:o},r?.label)]},r?.label||l)})),T&&e(m,{snapTooltipToDatumX:!0,snapTooltipToDatumY:!0,showSeriesGlyphs:!0,renderTooltip:f})]}),_&&e(u,{items:A,orientation:k,className:g["line-chart-legend"]})]})}));export{x as default};
//# sourceMappingURL=line-chart.js.map
