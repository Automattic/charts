import{jsx as e,jsxs as t}from"react/jsx-runtime";import{curveNatural as a}from"@visx/curve";import{LinearGradient as i}from"@visx/gradient";import{buildChartTheme as o,XYChart as r,AnimatedGrid as l,AnimatedAxis as n,AnimatedAreaSeries as s,Tooltip as c}from"@visx/xychart";import m from"clsx";import{useMemo as d}from"react";import{useChartTheme as h}from"../../providers/theme/theme-provider.js";import{BaseLegend as p}from"../legend/base-legend.js";import{withResponsive as u}from"../shared/with-responsive.js";import v from"./line-chart.module.scss.js";const g=({tooltipData:a})=>{const i=a?.nearestDatum?.datum;if(!i)return null;const o=Object.entries(a?.datumByKey||{}).map((([e,{datum:t}])=>({key:e,value:t.value}))).sort(((e,t)=>t.value-e.value));return t("div",{className:v["line-chart__tooltip"],children:[e("div",{className:v["line-chart__tooltip-date"],children:i.date.toLocaleDateString()}),o.map((a=>t("div",{className:v["line-chart__tooltip-row"],children:[t("span",{className:v["line-chart__tooltip-label"],children:[a.key,":"]}),e("span",{className:v["line-chart__tooltip-value"],children:a.value})]},a.key)))]})},f=e=>new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"});var y=u((({data:u,width:y,height:x,className:N,margin:b,withTooltips:w=!0,showLegend:T=!1,legendOrientation:_="horizontal",withGradientFill:k=!1,options:D={}})=>{const S=h(),j=d((()=>{const e=u?.map((e=>e.options?.stroke??"")).filter(Boolean)??[];return o({...S,colors:[...e,...S.colors]})}),[S,u]);b=d((()=>{let e={top:0,right:0,bottom:40,left:40};return"right"===D.axis?.y?.orientation&&(e={...e,right:40,left:0}),"top"===D.axis?.x?.orientation&&(e={...e,top:40,bottom:0}),{...e,...b}}),[b,D]);const L=(e=>e?.length?e.some((e=>e.data.some((e=>isNaN(e.value)||null===e.value||void 0===e.value||isNaN(e.date.getTime())))))?"Invalid data":null:"No data available")(u);if(L)return e("div",{className:m("line-chart",v["line-chart"]),children:L});const O=u.map(((e,t)=>({label:e.label,value:"",color:S.colors[t%S.colors.length]}))),z={xAccessor:e=>e.date,yAccessor:e=>e.value};return t("div",{className:m("line-chart",v["line-chart"],N),"data-testid":"line-chart",role:"img","aria-label":"line chart",children:[t(r,{theme:j,width:y,height:x,margin:b,xScale:{type:"time",...D?.xScale},yScale:{type:"linear",nice:!0,zero:!1,...D?.yScale},children:[e(l,{columns:!1,numTicks:4}),e(n,{orientation:"bottom",numTicks:5,tickFormat:f,...D?.axis?.x}),e(n,{orientation:"left",numTicks:4,...D?.axis?.y}),u.map(((o,r)=>{const l=o.options?.stroke??j.colors[r%j.colors.length];return t("g",{children:[k&&e(i,{id:`area-gradient-${r+1}`,from:l,to:"white",toOpacity:.1,...o.options?.gradient,"data-testid":"line-gradient"}),e(s,{dataKey:o?.label,data:o.data,...z,fill:k?`url(#area-gradient-${r+1})`:void 0,renderLine:!0,curve:a},o?.label)]},o?.label||r)})),w&&e(c,{snapTooltipToDatumX:!0,snapTooltipToDatumY:!0,showSeriesGlyphs:!0,renderTooltip:g})]}),T&&e(p,{items:O,orientation:_,className:v["line-chart-legend"]})]})}));export{y as default};
//# sourceMappingURL=line-chart.js.map
