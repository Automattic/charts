import{jsx as e,jsxs as t}from"react/jsx-runtime";import{localPoint as a}from"@visx/event";import{Group as i}from"@visx/group";import{Pie as l}from"@visx/shape";import{Text as o}from"@visx/text";import{useTooltip as r}from"@visx/tooltip";import s from"clsx";import{useCallback as d}from"react";import{useChartTheme as c}from"../../providers/theme/theme-provider.js";import{BaseLegend as n}from"../legend/base-legend.js";import{withResponsive as p}from"../shared/with-responsive.js";import{BaseTooltip as m}from"../tooltip/base-tooltip.js";import h from"./pie-semi-circle-chart.module.scss.js";const v=({data:p,width:v=400,thickness:g=.4,clockwise:u=!0,withTooltips:f=!1,showLegend:x=!1,legendOrientation:b="horizontal",label:w,note:N,className:M})=>{const y=c(),{tooltipOpen:A,tooltipLeft:j,tooltipTop:I,tooltipData:V,hideTooltip:D,showTooltip:P}=r(),T=d(((e,t)=>{const i=a(e);i&&P({tooltipData:t.data,tooltipLeft:i.x,tooltipTop:i.y-10})}),[P]),L=d((()=>{D()}),[D]),R=d((e=>t=>{T(t,e)}),[T]),{isValid:S,message:k}=(e=>e.length?e.some((e=>e.percentage<0||e.value<0))?{isValid:!1,message:"Invalid data: Negative values are not allowed"}:e.reduce(((e,t)=>e+t.percentage),0)<=0?{isValid:!1,message:"Invalid percentage total: Must be greater than 0"}:{isValid:!0,message:""}:{isValid:!1,message:"No data available"})(p);if(!S)return e("div",{className:h["pie-semi-circle-chart"],children:e("svg",{width:v,height:v/2,"data-testid":"pie-chart-svg",children:e("text",{x:"50%",y:"50%",textAnchor:"middle",className:h.error,children:k})})});const C=v/2,O=.03,$=v-.06,z=C-O,B=Math.min($,2*z)/2,q=B*(1-g+O),E=p.map(((e,t)=>({...e,index:t}))),F=u?-Math.PI/2:Math.PI/2,G=u?Math.PI/2:-Math.PI/2,H={value:e=>e.value,sort:(e,t)=>t.value-e.value,fill:e=>e.color||y.colors[e.index%y.colors.length]},J=p.map(((e,t)=>({label:e.label,value:e.valueDisplay||e.value.toString(),color:H.fill({...e,index:t})})));return t("div",{className:s("pie-semi-circle-chart",h["pie-semi-circle-chart"],M),"data-testid":"pie-chart-container",children:[e("svg",{width:v,height:C,viewBox:`0 0 ${v} ${C}`,"data-testid":"pie-chart-svg",children:t(i,{top:B,left:B,children:[e(l,{data:E,pieValue:H.value,outerRadius:B,innerRadius:q,cornerRadius:3,padAngle:O,startAngle:F,endAngle:G,pieSort:H.sort,children:t=>t.arcs.map((a=>e("g",{onMouseMove:R(a),onMouseLeave:L,children:e("path",{d:t.path(a)||"",fill:H.fill(a.data),"data-testid":"pie-segment"})},a.data.label)))}),t(i,{children:[e(o,{textAnchor:"middle",verticalAnchor:"start",y:-40,className:h.label,children:w}),e(o,{textAnchor:"middle",verticalAnchor:"start",y:-20,className:h.note,children:N})]})]})}),f&&A&&V&&e(m,{data:{label:V.label,value:V.value,valueDisplay:V.valueDisplay},top:I||0,left:j||0}),x&&e(n,{items:J,orientation:b,className:h["pie-semi-circle-chart-legend"]})]})};v.displayName="PieSemiCircleChart";var g=p(v);export{g as default};
//# sourceMappingURL=pie-semi-circle-chart.js.map
