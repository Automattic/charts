import{jsxs as e,jsx as t}from"react/jsx-runtime";import{localPoint as o}from"@visx/event";import{Group as i}from"@visx/group";import{Pie as l}from"@visx/shape";import{Text as a}from"@visx/text";import{useTooltip as r}from"@visx/tooltip";import s from"clsx";import{useCallback as p}from"react";import{useChartTheme as c}from"../../providers/theme/theme-provider.js";import{BaseLegend as m}from"../legend/base-legend.js";import{withResponsive as n}from"../shared/with-responsive.js";import{BaseTooltip as d}from"../tooltip/base-tooltip.js";import h from"./pie-semi-circle-chart.module.scss.js";const v=({data:n,size:v=500,label:u,note:f,className:x,withTooltips:g=!1,clockwise:b=!0,thickness:y=.4,showLegend:A,legendOrientation:M})=>{const j=c(),{tooltipOpen:w,tooltipLeft:N,tooltipTop:D,tooltipData:P,hideTooltip:T,showTooltip:I}=r(),L=v/2,R=v/2,S=v/2,k=S*(1-y+.03),C=n.map(((e,t)=>({...e,index:t}))),O=b?-Math.PI/2:Math.PI/2,$=b?Math.PI/2:-Math.PI/2,z={value:e=>e.value,sort:(e,t)=>t.value-e.value,fill:e=>e.color||j.colors[e.index%j.colors.length]},B=p(((e,t)=>{const i=o(e);i&&I({tooltipData:t.data,tooltipLeft:i.x,tooltipTop:i.y-10})}),[I]),V=p((()=>{T()}),[T]),q=p((e=>t=>{B(t,e)}),[B]),E=n.map(((e,t)=>({label:e.label,value:e.valueDisplay||e.value.toString(),color:z.fill({...e,index:t})})));return e("div",{className:s("pie-semi-circle-chart",h["pie-semi-circle-chart"],x),children:[t("svg",{viewBox:`0 0 ${v} ${R}`,children:e(i,{top:L,left:L,children:[t(l,{data:C,pieValue:z.value,outerRadius:S,innerRadius:k,cornerRadius:3,padAngle:.03,startAngle:O,endAngle:$,pieSort:z.sort,children:e=>e.arcs.map((o=>t("g",{onMouseMove:q(o),onMouseLeave:V,children:t("path",{d:e.path(o)||"",fill:z.fill(o.data)})},o.data.label)))}),e(i,{children:[t(a,{textAnchor:"middle",verticalAnchor:"start",y:-40,className:h.label,children:u}),t(a,{textAnchor:"middle",verticalAnchor:"start",y:-20,className:h.note,children:f})]})]})}),g&&w&&P&&t(d,{data:{label:P.label,value:P.value,valueDisplay:P.valueDisplay},top:D||0,left:N||0}),A&&t(m,{items:E,orientation:M,className:h["pie-semi-circle-chart-legend"]})]})};v.displayName="PieSemiCircleChart";var u=n(v);export{u as default};
//# sourceMappingURL=pie-semi-circle-chart.js.map
